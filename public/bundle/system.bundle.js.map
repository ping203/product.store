{"version":3,"sources":["webpack:///webpack/bootstrap 83f0e43dd9dac63d6763","webpack:///./app/system/app.js","webpack:///./app/system/helper/helper.js","webpack:///./app/plugins/infica-tags-input/infica-tags-input.js","webpack:///./app/system/email-marketing/EmailMarketingAddController.js","webpack:///./app/system/ga/GaController.js","webpack:///./app/system/product/ProductAddController.js","webpack:///./app/system/product/ProductUpdateController.js","webpack:///./app/plugins/infica-tags-input/infica-tags-input.scss?e7f6","webpack:///./app/system/system.entry.js","webpack:///./app/plugins/unserialize.js","webpack:///./less/common.less?5e12","webpack:///./app/system/email-marketing/EmailMarketingEditController.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA,mDAA2C,cAAc;;AAEzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;AChEA;;AAEA,qB;;;;;;ACFA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,EAAE;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;;AAGL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT,KAAK;;AAEL;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA,wB;;;;;;ACrEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA,aAAa;;AAEb;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,8BAA8B,YAAY;AAC1C;;AAEA;AACA;AACA;AACA;AACA,qBAAqB;;AAErB;AACA;AACA;AACA;AACA,qBAAqB;;AAErB;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,8BAA8B,kBAAkB;AAChD;AACA;;AAEA;AACA;;AAEA;AACA;AACA,8BAA8B,kBAAkB;AAChD;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,qBAAqB;;AAErB;;AAEA;;AAEA;;AAEA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;;AAEA,8BAA8B,kBAAkB;AAChD;AACA;AACA;AACA;;AAEA;;AAEA;AACA,aAAa;AACb,SAAS;AACT;AACA,CAAC,Y;;;;;;;;;;;ACnJD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;;AAErB;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;;;;;;;;;;;;AC9KA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,SAAS;AACT;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,C;;;;;;;;;;;ACzMA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA,SAAS;;AAET;AACA;AACA;AACA;;AAEA;AACA,SAAS;;AAET;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;;AAET;AACA;AACA,SAAS;;AAET;AACA,0BAA0B,uBAAuB;AACjD;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA,aAAa;AACb,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA,E;;;;;;;;;;;AC5JA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,aAAa;;AAEb;;AAEA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;;AAET;AACA;AACA,SAAS;;AAET;AACA,0BAA0B,uBAAuB;AACjD;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA,6BAA6B;AAC7B;AACA,qBAAqB;AACrB;AACA;AACA;AACA,aAAa;AACb,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;;;AAGT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,iBAAiB;AACjB;AACA,SAAS;;;AAGT;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,SAAS;;AAET;;AAEA;AACA;AACA;AACA,C;;;;;;;ACtQA,yC;;;;;;;;;;;;;;;;;;;;;ACAA;AAAA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;;;;;;;;;;;AChBA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA,uBAAuB,kBAAkB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;;AAEA,wBAAwB,oCAAoC,YAAY;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,U;;;;;;ACrCD,yC;;;;;;;;;;;;ACAA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;;AAErB;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA","file":"./bundle/system.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 10);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 83f0e43dd9dac63d6763","window.app = {};\n\nmodule.exports = app;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app/system/app.js\n// module id = 0\n// module chunks = 0","var Helper = {\n\n    number_format: function(number, decimals, dec_point, thousands_sep) {\n        number = (number + '')\n          .replace(/[^0-9+\\-Ee.]/g, '');\n        var n = !isFinite(+number) ? 0 : +number,\n          prec = !isFinite(+decimals) ? 0 : Math.abs(decimals),\n          sep = (typeof thousands_sep === 'undefined') ? ',' : thousands_sep,\n          dec = (typeof dec_point === 'undefined') ? '.' : dec_point,\n          s = '',\n          toFixedFix = function(n, prec) {\n             var k = Math.pow(10, prec);\n             return '' + (Math.round(n * k) / k)\n                .toFixed(prec);\n          };\n        // Fix for IE parseFloat(0.55).toFixed(0) = 0;\n        s = (prec ? toFixedFix(n, prec) : '' + Math.round(n))\n          .split('.');\n        if (s[0].length > 3) {\n          s[0] = s[0].replace(/\\B(?=(?:\\d{3})+(?!\\d))/g, sep);\n        }\n        if ((s[1] || '')\n          .length < prec) {\n          s[1] = s[1] || '';\n          s[1] += new Array(prec - s[1].length + 1)\n             .join('0');\n        }\n        return s.join(dec);\n    },\n\n\n    formatCurrency: function(value) {\n      return this.number_format(value, 0, '.', '.');\n    },\n\n    /**\n     * Show validate error from laravel when ajax submit form\n     */\n    showValidateError : function(response) {\n        var errors = response.responseJSON;\n        for(var key in errors) {\n            var error = errors[key];\n            $('[name=\"'+key+'\"]').addClass('in-valid-error').addClass('border-red');\n            for( var j in error) {\n                toastr.error(error[j], '');\n            }\n        }\n\n        $('.in-valid-error').on('change', function() {\n            $(this).removeClass('border-red');\n        });\n    },\n\n    showMessage : function(message, type, timeOut = 800) {\n        toastr[type](message, '', {\n          timeOut: timeOut\n        });\n    },\n\n    showMessageAndRedirect : function(message, type, url) {\n        toastr[type](message, '', {\n            timeOut: 800,\n            onHidden: function() {\n                window.location.href = url;\n            }\n        })\n    }\n}\n\nmodule.exports = Helper;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app/system/helper/helper.js\n// module id = 1\n// module chunks = 0","///// PLUGIN\n(function( $ ) {\n\n    // Tag input\n    $.fn.inficaTagsInput = function(options) {\n        var _default = {\n            width: '100%',\n            height: 'auto',\n            placeHolder: \"Add a tag\",\n            maxTags : 10,\n            items: [],\n            onAddTag : function(tag) {},\n            onRemoveTag: function(element) {}\n        };\n\n        options = $.extend(_default, options);\n\n        return this.each(function() {\n            var $this = $(this);\n\n            // Ẩn control thật\n            $this.hide();\n\n            var tagItemsId = [];\n\n            containerId = Math.round(Math.random(111111111,99999999)*100000000 + Math.floor(Date.now() / 1000));\n            var $container = $('<div>').attr({\n                id: 'infica-tags-input-container-'+containerId,\n                class : 'infica-tags-input-container'\n            }).css({\n                width: options.width,\n                height: options.height\n            });\n\n            var $input = $('<input />').attr({\n                type: 'text',\n                class: 'infica-tags-input-input',\n                placeHolder: options.placeHolder\n            });\n\n            var items = options.items;\n\n            function add_tag(tag) {\n                items.push(tag);\n\n                generate_tag();\n\n                options.onAddTag(tag);\n            }\n\n            function handle_remove_tag(e) {\n                console.log(e);\n            }\n\n            function generate_tag() {\n                // Reset\n                $container.empty();\n                // Append\n\n                var length = items.length;\n                if(length > options.maxTags) length = options.maxTags;\n\n                for(var i = 0; i < length; i ++) {\n                    var item = items[i];\n\n                    var $item = $('<span>').attr({\n                        class: 'infica-tag-item',\n                        'data-id' : item.id,\n                        'data-label': item.label\n                    }).html('<span>'+$.trim(item.label)+'</span>');\n\n                    var $close = $('<i>').attr({\n                        class : 'infica-tag-close',\n                        'data-id' : item.id,\n                        'data-label': $.trim(item.label)\n                    }).text('x');\n\n                    $item.append($close);\n\n                    $container.append($item);\n                }\n\n                $container.append($input);\n                $container.insertAfter($this);\n\n                // Gắn giá trị vào control thật\n                $this.attr('data-value', get_tag_values().join(','))\n                     .val(get_tag_values().join(','));\n            }\n\n            function get_tag_ids() {\n                var ids = [];\n                for(var i = 0; i < items.length; i ++) {\n                    ids.push(items[i].id);\n                }\n\n                return ids;\n            }\n\n            function get_tag_values() {\n                var values = [];\n                for(var i = 0; i < items.length; i ++) {\n                    values.push(items[i].label);\n                }\n\n                return values;\n            }\n\n            generate_tag();\n\n            // Keypress add tag\n            $(document).on('keypress', '#infica-tags-input-container-'+containerId+' .infica-tags-input-input', function(e) {\n                var keyCode = e.keyCode | e.which;\n\n                if(keyCode == 44 || keyCode == 13) {\n                    add_tag({\n                        id: 0,\n                        label: $(e.currentTarget).val()\n                    });\n\n                    generate_tag();\n\n                    $(this).focus();\n\n                    $(this).val('');\n\n                    return false;\n                }\n            });\n\n            // Remove tag\n            $(document).on('click', '#infica-tags-input-container-'+containerId+' .infica-tag-close', function(e) {\n                var _that = $(this);\n                $(this).parents('.infica-tag-item').remove();\n\n                for(var i = 0; i < items.length; i ++) {\n                    if(_that.data('id') == items[i].id) {\n                        items.splice(i, 1);\n                    }\n                }\n\n                generate_tag();\n\n                options.onRemoveTag(this);\n            });\n        });\n    }\n})( jQuery );\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app/plugins/infica-tags-input/infica-tags-input.js\n// module id = 2\n// module chunks = 0","import Helper from '../helper/helper';\nimport app from '../app';\n\napp.EmailMarketingAddController = function(args) {\n    var that = this;\n    that.args = args;\n    that.lastEmailTemplateChangeTimer = 0;\n    that.formData = {\n        title: \"\",\n        email_template_selected: {}\n    };\n\n    const formData = new FormData();\n\n    function init() {\n        // Register all events with the handle\n        eventRegister();\n    }\n\n    function onSelectEmailTemplate(e) {\n        let $this = $(this);\n\n        if($('#email-selected-container').find('#selected-item-id-'+$this.data('id')).length == 0) {\n            console.log('template');\n            let template = Mustache.render($('#tpl-email-selected').html(), {\n                id: $this.data('id'),\n                title: $this.data('title'),\n                time: 'Chưa cài đặt'\n            });\n\n            $('#email-selected-container').append($(template));\n        }\n\n    }\n\n    function onOpenPopupSetTimer(e) {\n        e.preventDefault();\n        var $this = $(this);\n        $('#modal-timer').modal('show');\n\n        that.lastEmailTemplateChangeTimer = $this.data('id');\n    }\n\n    function onDeleteTimer(e) {\n        e.preventDefault();\n        var $this = $(this);\n        if(confirm(\"Bạn có chắc chắn muốn xóa mẫu này không?\")) {\n            $this.parents('.email-template-selected-item').remove();\n        }\n    }\n\n    function toggleSendBtnRightNow(e) {\n        var $this = $(this);\n        if($this.is(':checked')) {\n            $this.parents('form')\n                .find('.form-control')\n                .attr('disabled', 'disabled');\n        } else {\n            $this.parents('form')\n                .find('.form-control')\n                .removeAttr('disabled');\n        }\n    }\n\n    function onSetTimerSubmit(e) {\n        e.preventDefault();\n        var $this = $(this);\n        var year = $('#form-set-timer').find('[name=\"year\"]').val();\n        var month = $('#form-set-timer').find('[name=\"month\"]').val();\n        var day = $('#form-set-timer').find('[name=\"day\"]').val();\n        var hour = $('#form-set-timer').find('[name=\"hour\"]').val();\n        var minute = $('#form-set-timer').find('[name=\"minute\"]').val();\n        var now = $('#form-set-timer').find('[name=\"now\"]').is(':checked');\n\n        $('#modal-timer').modal('hide');\n\n        let timeString = day+'/'+month+'/'+year+' '+hour+':'+minute;\n        if(now) {\n            timeString = 'Ngay lập tức';\n        }\n        $('#selected-item-id-'+that.lastEmailTemplateChangeTimer).find('.time').text(timeString);\n\n        // that.formData.email_template_selected[that.lastEmailTemplateChangeTimer] = {\n        //     id: that.lastEmailTemplateChangeTimer,\n        //     year: year,\n        //     month: month,\n        //     day: day,\n        //     hour: hour,\n        //     minute: minute,\n        //     now: now\n        // };\n\n        formData.append(\"email_template_selected[\"+that.lastEmailTemplateChangeTimer+\"][id]\", that.lastEmailTemplateChangeTimer);\n        formData.append(\"email_template_selected[\"+that.lastEmailTemplateChangeTimer+\"][year]\", year);\n        formData.append(\"email_template_selected[\"+that.lastEmailTemplateChangeTimer+\"][month]\", month);\n        formData.append(\"email_template_selected[\"+that.lastEmailTemplateChangeTimer+\"][day]\", day);\n        formData.append(\"email_template_selected[\"+that.lastEmailTemplateChangeTimer+\"][hour]\", hour);\n        formData.append(\"email_template_selected[\"+that.lastEmailTemplateChangeTimer+\"][minute]\", minute);\n        formData.append(\"email_template_selected[\"+that.lastEmailTemplateChangeTimer+\"][now]\", now);\n    }\n\n    function onSubmitMainForm(e) {\n        e.preventDefault();\n        var $this = $(this);\n        formData.append('name', $this.find('[name=\"name\"]').val());\n        formData.append('_token', args.token);\n\n        $.ajax({\n            url: \"/system/email-marketing/create\",\n            type: \"POST\",\n            data: formData,\n            processData: false,\n            contentType: false\n        });\n    }\n\n    function onOpenPopUpNewEmailTemplate(e) {\n        e.preventDefault();\n        var $this = $(this);\n        $('#modal-form-new-email-template').modal('show');\n    }\n\n    function onSubmitNewEmailTemplate(e) {\n        e.preventDefault();\n        var $this = $(this);\n\n        let data = $.unserialize($this.serialize());\n        data.content = tinymce.get('tiny-editor-new-email-template').getContent();\n\n        $.ajax({\n            url: '/system/email-template/create?_token='+that.args.token,\n            type: 'POST',\n            data: data,\n            beforeSend: function() {\n                $this.find('.btn-submit').attr('disabled', 'disabled');\n            },\n            success: function(response) {\n                $this.find('.btn-submit').removeAttr('disabled');\n                $('#modal-form-new-email-template').modal('hide');\n                if(response.code == 200) {\n                    let item = response.item;\n                    let newEmailTemplate = Mustache.render($('#tpl-email-template').html(), {\n                        id: item.id,\n                        title: item.title\n                    });\n\n                    $('#email-template-container').append(newEmailTemplate);\n                }\n            }\n        });\n    }\n\n    function eventRegister() {\n        $(document).on('click', '.btn-action-select-template-email', onSelectEmailTemplate);\n        $(document).on('click',  '.btn-timer', onOpenPopupSetTimer);\n        $(document).on('click',  '.btn-delete', onDeleteTimer);\n        $('#timer-checkbox-right-now').on('change', toggleSendBtnRightNow);\n\n        $('#form-set-timer').on('submit', onSetTimerSubmit);\n\n        $('#form-main').on('submit', onSubmitMainForm);\n\n        $('.btn-action-new-email-template').on('click', onOpenPopUpNewEmailTemplate);\n\n        $('#form-new-email-template').on('submit', onSubmitNewEmailTemplate);\n\n        $('#file-customers').on('change', function() {\n            formData.append('file-customers', this.files[0]);\n        });\n    }\n\n    return {\n        init: init\n    }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app/system/email-marketing/EmailMarketingAddController.js\n// module id = 3\n// module chunks = 0","import Helper from '../helper/helper';\nimport app from '../app';\n\napp.GaController = function(params) {\n\n    var chartData = params.chart_data;\n\n    function chart_summary() {\n        var data = {\n            labels: chartData.labels,\n            datasets: [\n                {\n                    label: \"Page view\",\n                    fill: false,\n                    lineTension: 0.1,\n                    backgroundColor: \"rgba(85,255,10,0.4)\",\n                    borderColor: \"rgba(85,192,10,1)\",\n                    borderCapStyle: 'butt',\n                    borderDash: [],\n                    borderDashOffset: 0.0,\n                    borderJoinStyle: 'miter',\n                    pointBorderColor: \"rgba(85,255,10,1)\",\n                    pointBackgroundColor: \"#fff\",\n                    pointBorderWidth: 1,\n                    pointHoverRadius: 5,\n                    pointHoverBackgroundColor: \"rgba(85,255,10,1)\",\n                    pointHoverBorderColor: \"rgba(85,255,10,1)\",\n                    pointHoverBorderWidth: 2,\n                    pointRadius: 1,\n                    pointHitRadius: 10,\n                    data: chartData.page_view.data,\n                    spanGaps: false\n                }\n            ]\n        };\n\n        var ctx = document.getElementById('chart');\n        var myLineChart = new Chart(ctx, {\n            type: 'line',\n            data: data,\n            options: {\n                tooltips: {\n                    enabled: true,\n                    mode: 'single',\n                    callbacks: {\n                        label: function(tooltipItems, data) {\n                            return Helper.formatCurrency(tooltipItems.yLabel);\n                        }\n                    }\n                },\n                scales: {\n                    yAxes: [{\n                        ticks: {\n                            // Create scientific notation labels\n                            callback: function(value, index, values) {\n                                return Helper.formatCurrency(value);\n                            }\n                        }\n                    }]\n                }\n            }\n        });\n    }\n\n    function chart_visit() {\n        var data = {\n            labels: chartData.labels,\n            datasets: [\n                {\n                    label: \"Visit\",\n                    fill: false,\n                    lineTension: 0.1,\n                    backgroundColor: \"rgba(75,192,192,0.4)\",\n                    borderColor: \"rgba(75,192,192,1)\",\n                    borderCapStyle: 'butt',\n                    borderDash: [],\n                    borderDashOffset: 0.0,\n                    borderJoinStyle: 'miter',\n                    pointBorderColor: \"rgba(75,192,192,1)\",\n                    pointBackgroundColor: \"#fff\",\n                    pointBorderWidth: 1,\n                    pointHoverRadius: 5,\n                    pointHoverBackgroundColor: \"rgba(75,192,192,1)\",\n                    pointHoverBorderColor: \"rgba(220,220,220,1)\",\n                    pointHoverBorderWidth: 2,\n                    pointRadius: 1,\n                    pointHitRadius: 10,\n                    data: chartData.visit.data,\n                    spanGaps: false\n                }\n            ]\n        };\n\n        var ctx = document.getElementById('chart-visit');\n        var myLineChart = new Chart(ctx, {\n            type: 'line',\n            data: data,\n            options: {\n                tooltips: {\n                    enabled: true,\n                    mode: 'single',\n                    callbacks: {\n                        label: function(tooltipItems, data) {\n                            return Helper.formatCurrency(tooltipItems.yLabel);\n                        }\n                    }\n                },\n                scales: {\n                    yAxes: [{\n                        ticks: {\n                            // Create scientific notation labels\n                            callback: function(value, index, values) {\n                                return Helper.formatCurrency(value);\n                            }\n                        }\n                    }]\n                }\n            }\n        });\n    }\n\n    function chart_session_duration() {\n        var data = {\n            labels: chartData.labels,\n            datasets: [\n                {\n                    label: \"Session duration\",\n                    fill: false,\n                    lineTension: 0.1,\n                    backgroundColor: \"rgba(25,11,10,0.4)\",\n                    borderColor: \"rgba(25,11,10,1)\",\n                    borderCapStyle: 'butt',\n                    borderDash: [],\n                    borderDashOffset: 0.0,\n                    borderJoinStyle: 'miter',\n                    pointBorderColor: \"rgba(25,11,10,1)\",\n                    pointBackgroundColor: \"#fff\",\n                    pointBorderWidth: 1,\n                    pointHoverRadius: 5,\n                    pointHoverBackgroundColor: \"rgba(25,11,10,1)\",\n                    pointHoverBorderColor: \"rgba(25,11,10,1)\",\n                    pointHoverBorderWidth: 2,\n                    pointRadius: 1,\n                    pointHitRadius: 10,\n                    data: chartData.session_duration.data,\n                    spanGaps: false\n                }\n            ]\n        };\n\n        var ctx = document.getElementById('chart-session-duration');\n        var myLineChart = new Chart(ctx, {\n            type: 'line',\n            data: data,\n            options: {\n                tooltips: {\n                    enabled: true,\n                    mode: 'single',\n                    callbacks: {\n                        label: function(tooltipItems, data) {\n                            return Helper.formatCurrency(tooltipItems.yLabel);\n                        }\n                    }\n                },\n                scales: {\n                    yAxes: [{\n                        ticks: {\n                            // Create scientific notation labels\n                            callback: function(value, index, values) {\n                                return Helper.formatCurrency(value);\n                            }\n                        }\n                    }]\n                }\n            }\n        });\n    }\n\n\n    function setup_date_picker() {\n        $('.datepicker').datepicker({\n            todayHighlight: true,\n            todayBtn: \"linked\",\n            keyboardNavigation: false,\n            forceParse: false,\n            calendarWeeks: true,\n            autoclose: true,\n            format: 'yyyy-mm-dd',\n        });\n    }\n\n    function init() {\n        setup_date_picker();\n        chart_summary();\n        chart_visit();\n        chart_session_duration();\n    }\n\n    return {\n        init: init\n    }\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app/system/ga/GaController.js\n// module id = 4\n// module chunks = 0","import Helper from '../helper/helper';\nimport app from '../app';\n\napp.ProductAddController = function() {\n\n    function init() {\n        // Biến xác nhận có tạo variant hay ko?\n        var _fillAttr = false;\n\n        function initTagsInput() {\n            // Input tags input\n            $('.attribute-value-input').tagsInput({\n                defaultText : 'Nhập giá trị cách nhau bằng dấu phẩy hoặc nhấn Enter',\n                width: '100%',\n                height: 100\n            });\n        }\n\n        initTagsInput();\n\n        // Show form add variant\n        $('#add-variant').click(function(e) {\n            e.preventDefault();\n            $('#variant-container').removeClass('hide');\n\n            //  Ẩn hiện nút đóng\n            if(!$('#variant-container').hasClass('hide')) {\n                $('#cancel-variant').removeClass('hide');\n            } else {\n                $('#cancel-variant').addClass('hide');\n            }\n\n            _fillAttr = true;\n        });\n\n        // Cancel variant\n        $('#cancel-variant').click(function() {\n            $('#variant-container').addClass('hide');\n            $(this).addClass('hide');\n\n            _fillAttr = false;\n        });\n\n        // Append control to create variant\n        $('#btn-add-new-attribute').click(function(e) {\n            e.preventDefault();\n\n            // $(document.getElementById('template-new-attribute').innerHTML).insertAfter('.first-attribute');\n            $('#placement-new-attribute').append($(document.getElementById('template-new-attribute').innerHTML));\n\n            initTagsInput();\n\n            if($('.attribute-row').length == 3) {\n                $(this).addClass('hide');\n            }\n        });\n\n        // Delete variant\n        $(document).on('click', '.btn-delete-attribute', function(e) {\n            e.preventDefault();\n            $(this).parents('.attribute-row').remove();\n        });\n\n        // Get file data when i click choose file from computer\n        var _image,\n            _back_image,\n            _images = [];\n\n        $('[name=\"image\"]').change(function() {\n            _image = this.files[0];\n        });\n\n        $('[name=\"back_image\"]').change(function() {\n            _back_image = this.files[0];\n        });\n\n        $('[name=\"images[]\"]').change(function() {\n            for(var i = 0; i < this.files.length; i ++) {\n                _images.push(this.files[i]);\n            }\n        });\n\n        var saveAndExit = 0;\n        $('#btn-save-and-exit').click(function(e) {\n            e.preventDefault();\n            saveAndExit = 1;\n            $('#form-data').submit();\n        });\n\n        // Submit form\n        $('#form-data').on('submit', function(e) {\n            e.preventDefault();\n\n            var $form = $(this);\n\n            var formData = new FormData();\n            var arrayFormDataSubmit = $form.serializeArray();\n\n            for(var i in arrayFormDataSubmit) {\n                var control = arrayFormDataSubmit[i];\n                formData.append(control.name, control.value);\n            }\n\n            if(_image) formData.append('image', _image);\n            if(_back_image) formData.append('back_image', _back_image);\n            if(_images) {\n                for( var i in _images ) {\n                    formData.append('images[]', _images[i]);\n                }\n            }\n\n            if(_fillAttr == false) {\n                formData.delete('option[]');\n                formData.delete('value[]');\n            }\n\n            $.ajax({\n                url: $form.attr('action'),\n                type: \"POST\",\n                dataType: 'json',\n                data : formData,\n                cache: false,\n                processData: false,\n                contentType: false,\n                error : function(response) {\n                    Helper.showValidateError(response);\n                },\n\n                success : function(response) {\n                    if(response.code == 1) {\n                        if(saveAndExit == 0) {\n                            Helper.showMessageAndRedirect(response.message, 'success', response.redirect);\n                        } else {\n                            Helper.showMessage(response.message, 'success', 600);\n                            setTimeout(() => {\n                                window.location.href = \"/system/product/index\";\n                            }, 600)\n                        }\n                    }\n                }\n            });\n        });\n\n        // Ajax search product group\n        $('#product-group').tokenInput('/system/ajax/product-group', {\n            preventDuplicates: true,\n            theme: 'facebook',\n            hintText: \"Nhóm sản phẩm\",\n            noResultsText: \"Không có nhóm nào được tìm thấy\",\n            searchingText: \"Đang tìm\"\n        });\n    }\n\n    return {\n        init: init\n    }\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app/system/product/ProductAddController.js\n// module id = 5\n// module chunks = 0","import Helper from '../helper/helper';\nimport app from '../app';\n\napp.ProductUpdateController = function(params) {\n    var _that = this;\n    this.hasChild = params.has_child ? params.has_child : 0;\n\n    /**\n     * Request delete option value\n     */\n    function requestDeleteOptionvalue(variantId, valueId) {\n        // console.log(e);\n        $.ajax({\n            url: \"/ajax/delete-option-value\",\n            type: \"POST\",\n            data: {\n                variant_id : variantId,\n                valueId: valueId\n            }\n        });\n    }\n\n    function init() {\n        // Biến xác nhận có tạo variant hay ko?\n        var _fillAttr = _that.hasChild ? true : false;\n\n        // Append control to create variant\n        $('#btn-add-new-attribute').click(function(e) {\n            e.preventDefault();\n\n            // $(document.getElementById('template-new-attribute').innerHTML).insertAfter('.first-attribute');\n            $('#placement-new-attribute').append($(document.getElementById('template-new-attribute').innerHTML));\n\n            $('#placement-new-attribute .attribute-value-input:last').inficaTagsInput({\n                placeHolder: \"VD: Xanh,Đỏ,Vàng\"\n            });\n\n            $('#placement-new-attribute').find('.btn-delete-attribute').attr('data-id', 0);\n\n            if($('.attribute-row').length == 3) {\n                $(this).addClass('hide');\n            }\n        });\n\n        // Delete variant\n        $(document).on('click', '.btn-delete-attribute', function(e) {\n            e.preventDefault();\n            var $this = $(this);\n            $this.parents('.attribute-row').remove();\n\n            $.ajax({\n                url: \"/system/product/option/\"+$this.data('id')+\"/delete\",\n                type: 'GET',\n                dataType: \"json\",\n                success: function(response) {\n                    console.log(response);\n                }\n            });\n\n            // Nếu xóa hết, cập nhật lại trạng thái _fillAttr\n            if($('.attribute-row').length == 0) {\n                _fillAttr = false;\n            }\n        });\n\n        // Get file data when i click choose file from computer\n        var _image,\n            _back_image,\n            _images = [];\n\n        $('[name=\"image\"]').change(function() {\n            _image = this.files[0];\n        });\n\n        $('[name=\"back_image\"]').change(function() {\n            _back_image = this.files[0];\n        });\n\n        $('[name=\"images[]\"]').change(function() {\n            for(var i = 0; i < this.files.length; i ++) {\n                _images.push(this.files[i]);\n            }\n        });\n\n        var saveAndExit = 0;\n        $('#btn-save-and-exit').click(function(e) {\n            e.preventDefault();\n            saveAndExit = 1;\n            $('#form-data').submit();\n        });\n\n        // Submit form\n        $('#form-data').on('submit', function(e) {\n            e.preventDefault();\n\n            var $form = $(this);\n\n            var formData = new FormData();\n            var arrayFormDataSubmit = $form.serializeArray();\n\n            for(var i in arrayFormDataSubmit) {\n                var control = arrayFormDataSubmit[i];\n                formData.append(control.name, control.value);\n            }\n\n            if(_image) formData.append('image', _image);\n            if(_back_image) formData.append('back_image', _back_image);\n            if(_images) {\n                for( var i in _images ) {\n                    formData.append('images[]', _images[i]);\n                }\n            }\n\n            formData.append('spec', tinymce.get('spec').getContent());\n            formData.append('content', tinymce.get('content').getContent());\n            formData.append('introduce', tinymce.get('introduce').getContent());\n\n            $.ajax({\n                url: $form.attr('action'),\n                type: \"POST\",\n                dataType: 'json',\n                data : formData,\n                cache: false,\n                processData: false,\n                contentType: false,\n                error : function(response) {\n                    Helper.showValidateError(response);\n                },\n\n                success : function(response) {\n                    if(response.code == 1) {\n                        if(saveAndExit == 0) {\n                            Helper.showMessageAndRedirect(response.message, 'success', response.redirect);\n                        } else {\n                            Helper.showMessage(response.message, 'success', 600);\n                            setTimeout(() => {\n                                window.location.href = \"/system/product/index\";\n                            }, 600)\n                        }\n                    } else if(response.code == 422) {\n                        Helper.showMessage(response.message, 'error');\n                    }\n                }\n            });\n        });\n\n        // Upload image variant\n        var _tempIndexVariantImage = -1;\n        $('.variant-upload-image').click(function() {\n            $('#input-file-hidden').trigger('click');\n            _tempIndexVariantImage = $(this).data('key');\n        });\n\n        $('#input-file-hidden').on('change', function(e) {\n            var $this = $(this);\n            var _file = this.files[0];\n            var formdata = new FormData();\n            formdata.append('file', _file);\n            formdata.append('_token', App.config.token);\n\n            $.ajax({\n                url : \"/ajax/upload-image\",\n                type : \"POST\",\n                dataType: 'json',\n                data : formdata,\n                contentType: false,\n                processData: false,\n                beforeSend : function() {\n                    $('#variant-upload-image-' + _tempIndexVariantImage).attr('src', '/img/ajax-loader.gif');\n                },\n                success : function(response) {\n                    $('#variant-upload-image-' + _tempIndexVariantImage).attr('src', response.url);\n                    $('#variant-image-' + _tempIndexVariantImage).attr('value', response.filename);\n                }\n            })\n        });\n\n\n        // Xóa variant\n        $('.action-delete-variant').click(function(e) {\n            e.preventDefault();\n            var $this = $(this);\n            if(confirm(\"Bạn có chắc chắn muốn xóa sản phẩm này?\")) {\n                $.ajax({\n                    url: \"/system/product/variant/\"+$this.data('variant_id')+\"/delete\",\n                    type: \"GET\",\n                    data: {},\n                    dataType: \"json\",\n                    success: function(response) {\n                        Helper.showMessage(response.message, response.type);\n                        window.location.reload();\n                    }\n                });\n            }\n        });\n\n        // Update option\n        $('#form-create-option').on('submit', function(e) {\n            e.preventDefault();\n            var $this = $(this);\n            var $this = $(this);\n            $.ajax({\n                url: \"/system/product/option/update\",\n                type: \"POST\",\n                data: $this.serialize(),\n                dataType: \"json\",\n                success: function(response) {\n                    Helper.showMessageAndRedirect(response.message, response.type, response.redirect);\n                    $('#modal-show-change-option').modal('hide');\n                }\n            })\n        });\n\n        // Ajax search product group\n        $('#product-group').tokenInput('/system/ajax/product-group', {\n            preventDuplicates: true,\n            theme: 'facebook',\n            hintText: \"Nhóm sản phẩm\",\n            noResultsText: \"Không có nhóm nào được tìm thấy\",\n            searchingText: \"Đang tìm\",\n            prePopulate: params.group_data_input_token\n        });\n\n        $('.js-action-delete-product-image').on('click', function(e) {\n            e.preventDefault();\n            var $this = $(this);\n            if(confirm(\"Bạn có chắc chắn muốn xóa ảnh này?\")) {\n                $.ajax({\n                    url : \"/system/product/ajax/delete-image-item\",\n                    type: \"POST\",\n                    dataType : \"json\",\n                    data : {\n                        id: $this.data('id'),\n                        _token: App.config.token\n                    },\n                    success: function(response) {\n                        $this.parent().remove();\n                    }\n                });\n            }\n        });\n\n\n        // Preview image when you choice\n        $('.input-file-hidden').on('change', function() {\n            var $this = $(this);\n            if (this.files && this.files[0]) {\n                var reader = new FileReader();\n\n                reader.onload = function (e) {\n                    $this.prev().attr('src', e.target.result);\n                }\n\n                reader.readAsDataURL(this.files[0]);\n            }\n        });\n\n    }\n\n    return {\n        init: init\n    }\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app/system/product/ProductUpdateController.js\n// module id = 6\n// module chunks = 0","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app/plugins/infica-tags-input/infica-tags-input.scss\n// module id = 8\n// module chunks = 0","// Plugins\nimport '../plugins/infica-tags-input/infica-tags-input.js';\nimport '../plugins/infica-tags-input/infica-tags-input.scss';\n\nimport '../../less/common.less';\n\nimport '../plugins/unserialize.js';\n\n// System Product\nimport './product/ProductAddController';\nimport './product/ProductUpdateController';\n\n// Email marketing\nimport './email-marketing/EmailMarketingAddController';\nimport './email-marketing/EmailMarketingEditController';\n\n// Ga\nimport './ga/GaController.js'\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app/system/system.entry.js\n// module id = 10\n// module chunks = 0","(function($){\n    $.unserialize = function(str){\n        var items = str.split('&');\n        var ret = \"{\";\n        var arrays = [];\n        var index = \"\";\n        for (var i = 0; i < items.length; i++) {\n            var parts = items[i].split(/=/);\n            //console.log(parts[0], parts[0].indexOf(\"%5B\"),  parts[0].indexOf(\"[\"));\n            if (parts[0].indexOf(\"%5B\") > -1 || parts[0].indexOf(\"[\") > -1){\n                //Array serializado\n                index = (parts[0].indexOf(\"%5B\") > -1) ? parts[0].replace(\"%5B\",\"\").replace(\"%5D\",\"\") : parts[0].replace(\"[\",\"\").replace(\"]\",\"\");\n                //console.log(\"array detectado:\", index);\n                //console.log(arrays[index] === undefined);\n                if (arrays[index] === undefined){\n                    arrays[index] = [];\n                }\n                arrays[index].push( decodeURIComponent(parts[1].replace(/\\+/g,\" \")));\n                //console.log(\"arrays:\", arrays);\n            } else {\n                //console.log(\"common item (not array)\");\n                if (parts.length > 1){\n                    ret += \"\\\"\"+parts[0] + \"\\\": \\\"\" + decodeURIComponent(parts[1].replace(/\\+/g,\" \")).replace(/\\n/g,\"\\\\n\").replace(/\\r/g,\"\\\\r\") + \"\\\", \";\n                }\n            }\n\n        };\n\n        ret = (ret != \"{\") ? ret.substr(0,ret.length-2) + \"}\" : ret + \"}\";\n        //console.log(ret, arrays);\n        var ret2 = JSON.parse(ret);\n        //proceso los arrays\n        for (arr in arrays){\n            ret2[arr] = arrays[arr];\n        }\n        return ret2;\n    }\n})(jQuery);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app/plugins/unserialize.js\n// module id = 16\n// module chunks = 0","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./less/common.less\n// module id = 17\n// module chunks = 0","import Helper from '../helper/helper';\nimport app from '../app';\n\napp.EmailMarketingEditController = function(args) {\n    var that = this;\n    that.args = args;\n    that.lastEmailTemplateChangeTimer = 0;\n    that.lastTimeStampChange = 0;\n    that.formData = {\n        title: \"\",\n        email_template_selected: {}\n    };\n\n    const formData = new FormData();\n\n    function init() {\n        // Register all events with the handle\n        eventRegister();\n    }\n\n    function onSelectEmailTemplate(e) {\n        let $this = $(this);\n\n        if($('#email-selected-container').find('#selected-item-id-'+$this.data('id')).length == 0) {\n            console.log('template');\n            let template = Mustache.render($('#tpl-email-selected').html(), {\n                id: $this.data('id'),\n                title: $this.data('title'),\n                time: 'Chưa cài đặt'\n            });\n\n            $('#email-selected-container').append($(template));\n        }\n\n    }\n\n    function onOpenPopupSetTimer(e) {\n        e.preventDefault();\n        var $this = $(this);\n\n        that.lastEmailTemplateChangeTimer = $this.data('id');\n\n        let time = $this.data('time');\n\n        let $modalTimer = $('#modal-timer');\n        $modalTimer.modal('show');\n\n        // Gắn id vào modal để sau truy xuất ngược\n        $modalTimer.attr('last-selected-id', $this.data('id'));\n\n        if(time > 0) {\n            let date = new Date(time * 1000);\n            let year = date.getFullYear();\n            let month = date.getMonth()+1;\n            let day = date.getDate();\n            let hour = date.getHours();\n            let minute = date.getMinutes();\n\n            $modalTimer.find('[name=\"year\"]').val(year);\n            $modalTimer.find('[name=\"month\"]').val(month);\n            $modalTimer.find('[name=\"day\"]').val(day);\n            $modalTimer.find('[name=\"hour\"]').val(hour);\n            $modalTimer.find('[name=\"minute\"]').val(minute);\n        }\n    }\n\n    function onDeleteTimer(e) {\n        e.preventDefault();\n        var $this = $(this);\n        if(confirm(\"Bạn có chắc chắn muốn xóa mẫu này không?\")) {\n            $this.parents('.email-template-selected-item').remove();\n        }\n    }\n\n    function toggleSendBtnRightNow(e) {\n        var $this = $(this);\n        if($this.is(':checked')) {\n            $this.parents('form')\n                .find('.form-control')\n                .attr('disabled', 'disabled');\n        } else {\n            $this.parents('form')\n                .find('.form-control')\n                .removeAttr('disabled');\n        }\n    }\n\n    function onSetTimerSubmit(e) {\n        e.preventDefault();\n        var $this = $(this);\n        var year = $('#form-set-timer').find('[name=\"year\"]').val();\n        var month = $('#form-set-timer').find('[name=\"month\"]').val();\n        var day = $('#form-set-timer').find('[name=\"day\"]').val();\n        var hour = $('#form-set-timer').find('[name=\"hour\"]').val();\n        var minute = $('#form-set-timer').find('[name=\"minute\"]').val();\n        var now = $('#form-set-timer').find('[name=\"now\"]').is(':checked');\n\n        let timestamp = moment([year,month,day].join('-') + ' ' + [hour,minute].join(':')).unix();\n\n        // Set lại timestamp để hiện cho đúng\n        $('#selected-item-id-'+$('#modal-timer').attr('last-selected-id')).find('.btn-timer').data('time', timestamp);\n\n        $('#modal-timer').modal('hide');\n\n        let timeString = day+'/'+month+'/'+year+' '+hour+':'+minute;\n        if(now) {\n            timeString = 'Ngay lập tức';\n            $('#selected-item-id-'+$('#modal-timer').attr('last-selected-id')).find('.btn-timer').data('time', 0);\n        }\n        $('#selected-item-id-'+that.lastEmailTemplateChangeTimer).find('.time').text(timeString);\n\n        // formData.append(\"email_template_selected[\"+that.lastEmailTemplateChangeTimer+\"][id]\", that.lastEmailTemplateChangeTimer);\n        // formData.append(\"email_template_selected[\"+that.lastEmailTemplateChangeTimer+\"][year]\", year);\n        // formData.append(\"email_template_selected[\"+that.lastEmailTemplateChangeTimer+\"][month]\", month);\n        // formData.append(\"email_template_selected[\"+that.lastEmailTemplateChangeTimer+\"][day]\", day);\n        // formData.append(\"email_template_selected[\"+that.lastEmailTemplateChangeTimer+\"][hour]\", hour);\n        // formData.append(\"email_template_selected[\"+that.lastEmailTemplateChangeTimer+\"][minute]\", minute);\n        // formData.append(\"email_template_selected[\"+that.lastEmailTemplateChangeTimer+\"][now]\", now);\n    }\n\n    function onSubmitMainForm(e) {\n        e.preventDefault();\n        var $this = $(this);\n        formData.append('name', $this.find('[name=\"name\"]').val());\n        formData.append('_token', args.token);\n\n        if($('.email-template-selected-item').length == 0) {\n            alert('Vui lòng chọn một mẫu email để tiếp tục');\n            return;\n        }\n\n        $('.email-template-selected-item').each((index, el) => {\n            let time = $(el).find('.btn-timer').data('time');\n\n            if(time > 0) {\n                let date = new Date(time * 1000);\n                let year = date.getFullYear();\n                let month = date.getMonth()+1;\n                let day = date.getDate();\n                let hour = date.getHours();\n                let minute = date.getMinutes();\n\n                formData.append(\"email_template_selected[\"+$(el).find('.btn-timer').data('id')+\"][id]\", $(el).find('.btn-timer').data('id'));\n                formData.append(\"email_template_selected[\"+$(el).find('.btn-timer').data('id')+\"][year]\", year);\n                formData.append(\"email_template_selected[\"+$(el).find('.btn-timer').data('id')+\"][month]\", month);\n                formData.append(\"email_template_selected[\"+$(el).find('.btn-timer').data('id')+\"][day]\", day);\n                formData.append(\"email_template_selected[\"+$(el).find('.btn-timer').data('id')+\"][hour]\", hour);\n                formData.append(\"email_template_selected[\"+$(el).find('.btn-timer').data('id')+\"][minute]\", minute);\n                formData.append(\"email_template_selected[\"+$(el).find('.btn-timer').data('id')+\"][now]\", 'false');\n            } else {\n                formData.append(\"email_template_selected[\"+$(el).find('.btn-timer').data('id')+\"][now]\", 'true');\n            }\n        });\n\n        $.ajax({\n            url: \"/system/email-marketing/\"+that.args.campain_id+\"/edit\",\n            type: \"POST\",\n            data: formData,\n            processData: false,\n            contentType: false\n        });\n    }\n\n    function onOpenPopUpNewEmailTemplate(e) {\n        e.preventDefault();\n        var $this = $(this);\n        $('#modal-form-new-email-template').modal('show');\n    }\n\n    function onSubmitNewEmailTemplate(e) {\n        e.preventDefault();\n        var $this = $(this);\n\n        let data = $.unserialize($this.serialize());\n        data.content = tinymce.get('tiny-editor-new-email-template').getContent();\n\n        $.ajax({\n            url: '/system/email-template/create?_token='+that.args.token,\n            type: 'POST',\n            data: data,\n            beforeSend: function() {\n                $this.find('.btn-submit').attr('disabled', 'disabled');\n            },\n            success: function(response) {\n                $this.find('.btn-submit').removeAttr('disabled');\n                $('#modal-form-new-email-template').modal('hide');\n                if(response.code == 200) {\n                    let item = response.item;\n                    let newEmailTemplate = Mustache.render($('#tpl-email-template').html(), {\n                        id: item.id,\n                        title: item.title\n                    });\n\n                    $('#email-template-container').append(newEmailTemplate);\n                }\n            }\n        });\n    }\n\n    function eventRegister() {\n        $(document).on('click', '.btn-action-select-template-email', onSelectEmailTemplate);\n        $(document).on('click',  '.btn-timer', onOpenPopupSetTimer);\n        $(document).on('click',  '.btn-delete', onDeleteTimer);\n        $('#timer-checkbox-right-now').on('change', toggleSendBtnRightNow);\n\n        $('#form-set-timer').on('submit', onSetTimerSubmit);\n\n        $('#form-main').on('submit', onSubmitMainForm);\n\n        $('.btn-action-new-email-template').on('click', onOpenPopUpNewEmailTemplate);\n\n        $('#form-new-email-template').on('submit', onSubmitNewEmailTemplate);\n\n        $('#file-customers').on('change', function() {\n            formData.append('file-customers', this.files[0]);\n        });\n    }\n\n    return {\n        init: init\n    }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app/system/email-marketing/EmailMarketingEditController.js\n// module id = 19\n// module chunks = 0"],"sourceRoot":""}